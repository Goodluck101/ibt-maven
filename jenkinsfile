pipeline {
    agent { label 'UX-IBT'}

    parameters{
        string(name:"Branch_Name", defaultValue: "main", description: "Enter branch to build")
        choice(name: 'CHOICES', choices: ['one', 'two', 'three'], description: 'Choose a number')
    }
    environment{
        version = '1.3.0'
    }

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        } // stage 1
        stage('Hi') {
            steps {
                echo 'Hello this is shamrin'
            }
        }//stage 2
        stage('Download from Git'){
            steps{
                git changelog: false, credentialsId: 'Github_cred_shamrin', poll: false, url: 'https://github.com/shamrin23/demo-nov.git'
            }
        } // stage 3
        stage('List files'){
            steps{
                bat 'dir'
            } // got it from jenkins pipeline syntax windows batch script
        }
        stage('List choice'){
            steps{
                echo "Choice: ${params.CHOICES}"
            }
        } //stage 5
        stage('run on condition'){
        when{
            expression{
                 env.Branch_Name== 'main'
            }
        }
            steps{
                echo "running on main branch"
            }
        }
        stage('test'){
            steps{
                echo 'testing'
                echo "${env.version}"
                bat 'echo %version%'
            }
        }
    } //stages
    post {
            always {
                echo 'I will always say Hello again!'
            }
        }
} //pipeline
