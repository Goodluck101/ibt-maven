pipeline {
     agent { label'UX-IBT' }
       parameters{
               string(name:"Branch_Name", defaultValue: "main", description: "Enter branch to build")
               choice(name: 'CHOICES', choices: ['one', 'two', 'three'], description: 'choose a number')
                 }

        environment{
             version= '1.3.0'
        }
        stages {

            stage('Hello') {
               steps {
                 echo 'Hello World'
                     }
                           }

        stage('Hi') {
            steps {
                echo 'Hi this is Sagar practicing'
            }
        }

        stage('Download from Git') {
            steps {
               git branch: '$Branch_Name', changelog: false, credentialsId: 'Github_cred_sagar', poll: false, url: 'https://github.com/IBT-learning/ibt-maven.git'
                   }
                }
        stage('List Files') {
                    steps {
                       echo "listing files to verify"
                        }
                     }
        stage('list choice') {
                       steps {
                           echo "Choice: ${params.CHOICES}"
                                   }
                                }
        stage('run on condition')
        {
        when{
            expression{
                    env.Branch_Name =='main'
                }
            }
                          steps {
                                   echo "running on main branch"
                                           }
         }

        stage('test')
                {
                 steps {
                          echo "testing for triggers"
                          echo '${env.version}'
                          bat 'echo %version%'
                          script{
                            print env.version
                          }

                        }
                 }
        }
         post {
                always {
                    echo 'I will always say Hello again!'
                }
            }
        }





