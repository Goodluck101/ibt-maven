pipeline{

    agent any
    tools{
        maven 'maven_3.9.3'
    }
    stages{
        stage('github checkout'){
            steps{
                checkout scmGit(branches: [[name: '*/jan2024franklinv1']], extensions: [], userRemoteConfigs: [[credentialsId: 'franklin-githubacc', url: 'https://github.com/IBT-learning/ibt-maven']])

            }
        }// end of stage
        stage('list files'){
            steps{
               sh ' ls -lrt'

            }
        }// end of stage
         stage('validate'){
            steps{
               withMaven( maven: 'maven_3.9.3') {
                   sh 'mvn --version'
                   sh 'mvn validate'

               }

            }

         }// end of stage

         stage('compile'){
           steps{
             sh 'mvn --version'
             sh 'mvn test'

           }
         }// end of stage
         stage('package'){
           steps{
            sh 'mvn --version'
            sh 'mvn package'
           }
         }// end of stage

         stage('upload artefacts'){
                    steps{
                     withCredentials([file(credentialsId: 'settingfile-franklin', variable: 'settingfile-franklin')]) {
                         sh 'mvn  deploy -s $settingfile-franklin'
                     }
                                        }
                  }// end of stage
    }// end of stages
}// end of pipeline